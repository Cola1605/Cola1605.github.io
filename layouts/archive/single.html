{{- define "main" }}
{{- $month := .Params.month }}
{{- $year := substr $month 0 4 }}
{{- $monthNum := substr $month 5 2 }}
{{- $monthNames := slice "Th√°ng 1" "Th√°ng 2" "Th√°ng 3" "Th√°ng 4" "Th√°ng 5" "Th√°ng 6" "Th√°ng 7" "Th√°ng 8" "Th√°ng 9" "Th√°ng 10" "Th√°ng 11" "Th√°ng 12" }}
{{- $monthName := index $monthNames (sub (int $monthNum) 1) }}

<main class="main">
  <div class="main__header">
    <h1 class="main__title">üìÖ {{ $monthName }} {{ $year }}</h1>
    <p class="main__lead">Danh s√°ch b√†i vi·∫øt ƒë∆∞·ª£c ƒëƒÉng trong th√°ng n√†y</p>
  </div>

  {{- $pages := where .Site.RegularPages "Type" "posts" }}
  {{- $filteredPages := slice }}
  {{- range $pages }}
    {{- if eq (.Date.Format "2006-01") $month }}
      {{- $filteredPages = $filteredPages | append . }}
    {{- end }}
  {{- end }}

  {{- if $filteredPages }}
    <div class="main__content">
      <p><strong>T·ªïng c·ªông: {{ len $filteredPages }} b√†i vi·∫øt</strong></p>
      
      {{- range $filteredPages }}
      <article class="post">
        <header class="post__header">
          <h2 class="post__title">
            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
          </h2>
          <div class="post__meta">
            <time class="post__meta-date" datetime="{{ .Date.Format "2006-01-02" }}">
              üìÖ {{ .Date.Format "02/01/2006" }}
            </time>
            {{- if .Params.categories }}
            <span class="post__meta-categories">
              {{- range $i, $cat := .Params.categories }}
                {{- if $i }}, {{ end }}
                <a href="/categories/{{ $cat | urlize }}/">{{ $cat }}</a>
              {{- end }}
            </span>
            {{- end }}
          </div>
        </header>
        {{- if .Params.description }}
        <div class="post__content">
          <p>{{ .Params.description }}</p>
        </div>
        {{- end }}
        <footer class="post__footer">
          <a href="{{ .RelPermalink }}" class="btn">ƒê·ªçc ti·∫øp ‚Üí</a>
        </footer>
      </article>
      {{- end }}
    </div>
  {{- else }}
    <div class="main__content">
      <p>Kh√¥ng c√≥ b√†i vi·∫øt n√†o trong th√°ng n√†y.</p>
    </div>
  {{- end }}
</main>
{{- end }}
